from scipy.stats import shapiro
from scipy.stats import mannwhitneyu
from scipy.stats import ttest_ind
from scipy.stats import levene

def Normal_Test(tab):
    print("\nTest Shapiro-Wilka")
    print("H0: nasz rozkład jest normalny")
    print("HA: nasz rozkład NIE jest normalny")
    print("Poziom istotności alfa = 5%")

    print("\n-----------Test-----------")
    stat, p_value = shapiro(tab)
    print("Statystyka testowa:", stat)
    print(f"Wartość p:  {p_value}\n")

    # Sprawdzenie, czy p-value jest mniejsze od 0.05 (próg istotności)
    if p_value < 0.05:
        print("Odrzucamy hipotezę zerową - dane nie są zgodne z rozkładem normalnym.")
        tab_result = False
    else:
        print("Nie ma podstaw do odrzucenia hipotezy zerowej - dane są zgodne z rozkładem normalnym.")
        tab_result = True
    return tab_result

def Levene_Test(tab_1, tab_2):
    # Test Levene'a na równość wariancji
    statystyka, p_value = levene(tab_1, tab_2)
    print("\nTest Levene")
    print("Statystyka Levene'a:", statystyka)
    print("Wartość p:", p_value)

    if p_value < 0.05:
        print("Wariancje próbek są istotnie różne.")
        tab_var_result = False
    else:
        print("Nie ma istotnych różnic w wariancjach próbek.")
        tab_var_result = True
    return tab_var_result

def Mann_Whitney_Test(tab_1, tab_2):
    statystyka, p_value = mannwhitneyu(tab_1, tab_2, alternative='less')
    print("\nTest Manna_Whitneya")
    print("Statystyka U:", statystyka)
    print("Wartość p:", p_value)

    if p_value < 0.05:
        print("Próbka 1 ma istotnie mniejsze wartości od próbki 2.")
    else:
        print("Brak istotnych różnic w wartościach między próbkami.")

def T_Studnet_test(tab_1, tab_2):
    # Test jednostronny (sprawdza, czy średnia próbki 1 jest mniejsza niż średnia próbki 2)
    statystyka, p_value = ttest_ind(tab_1, tab_2, alternative='less', equal_var=True)
    print("\nTest T-Studenta")
    print("Statystyka t:", statystyka)
    print("Wartość p:", p_value)

    if p_value < 0.05:
        print("Średnia próbki 1 jest istotnie mniejsza niż średnia próbki 2.")
    else:
        print("Brak istotnej różnicy między średnimi próbek.")

def Welch_Test(tab_1, tab_2):
    # Test jednostronny (sprawdza, czy średnia próbki 1 jest mniejsza niż średnia próbki 2)
    statystyka, p_value = ttest_ind(tab_1, tab_2, alternative='less', equal_var=False)
    print("\nTest Welcha")
    print("Statystyka t:", statystyka)
    print("Wartość p:", p_value)

    if p_value < 0.05:
        print("Średnia próbki 1 jest istotnie mniejsza niż średnia próbki 2.")
    else:
        print("Brak istotnej różnicy między średnimi próbek.")


example_1 = [2.793042801637483, 8.011478757828058, 5.498377031995594, 7.376325556460668, 3.631715573559958, 3.313486509782607, 3.228812035943394, 3.895613920731322, 6.65770857854709, 5.060082982297652, 4.1046918427123, 4.183182501207728, 5.324853077450041, 4.194631889425841, 2.720834294341466, 2.8247458139980814, 4.706903240342675, 7.26251470836342, 3.2737732053916897, 4.2203899596385535, 3.621150299237369, 4.820314598780106, 10.242181365785566, 4.138562542418484, 2.8852047613378704, 3.5732211599835777, 4.0248120291217715, 3.6973804604247062, 4.072239614546019, 3.012495041658551, 2.311311971660184, 2.2074658895200767, 5.504564085235846, 6.87137627404849, 3.4434073938579326, 2.888805260604632, 3.272567231337913, 6.061458289388269, 2.051462287536945, 3.870581520182169, 5.093805253021898, 4.962994107090855, 2.184432171962313, 3.9876938598943386, 2.668810628208905, 5.940415502401533, 2.6456706834985093, 3.394359799510726, 3.5972125656191376, 3.554959433234617, 3.0606644270244807, 3.9300623179327, 2.610416589408394, 3.097115905803568, 3.1346592769059, 2.4314889093507768, 4.246315021247945, 4.289993403111971, 4.8156800493120695, 4.5780289992781436, 8.02716557957662, 5.23233742299814, 2.87623223212353, 7.080247774718419, 3.1912018545411116, 5.377170436877762, 4.646362887033514, 2.942637831519065, 4.168808617716049, 2.189525885643565, 2.144929465163149, 4.471906551756802, 2.1788668485034015, 4.642337763569599, 3.3025717399258494, 8.339424455040504, 4.232272696679627, 3.7300718026991846, 2.4948144450315746, 2.750910313572363, 7.005966914706766, 8.887607365787817, 3.185599011970709, 3.448089713865412, 2.6766823683723215, 3.837920591211555, 2.9084449936710906, 3.372307973753152, 4.913523411932557, 4.487392113422923, 2.415818430588427, 5.7535751350062, 3.617716595829426, 2.988998806812542, 5.889087694184256, 3.7069426677321857, 2.6546069851307244, 4.436219343557282, 5.461894040393293, 8.056725087473751]
example_2 = [4.9698100449707034, 10.033198214841642, 7.54394768, 9.586306162554726, 5.495587781584748, 5.481518572744543, 5.122437046247241, 5.905370556839618, 8.513015599114633, 6.791084753742812, 6.259310790770686, 6.190935394040698, 7.497388263017839, 6.001689097302042, 4.620045083072404, 4.7716780397374325, 6.709281110731019, 9.395680161930622, 5.273925817793641, 6.416824362787081, 5.755335351892492, 6.847605747540477, 11.872230642994312, 5.979017866143859, 4.954285534097565, 5.711364507429322, 6.058499812561345, 5.683570026372738, 6.224627129131263, 5.1924858305068184, 4.201386406442716, 4.34452485529931, 7.742555808412092, 8.901235104724522, 5.340668395114378, 5.079205006393335, 5.4062237418963255, 8.298748042097024, 4.199843205901746, 6.060172618222658, 7.328119244362067, 6.868419839174599, 4.309242479138209, 5.929991833156708, 4.6900060055555555, 8.005798332433297, 4.666588208697811, 5.31806264724858, 5.6199856904515455, 5.316792458596835, 4.97490371652516, 5.981396375649658, 4.591489029493313, 4.937494070328036, 5.142835041690641, 4.661969639407185, 6.305086193922922, 6.34644486389962, 6.723747591525956, 6.331573744224567, 10.034859339770001, 7.267012656182041, 4.882437442488039, 9.16672444323869, 5.110670705028751, 7.45307799101107, 6.856208945077557, 4.982325468314848, 6.397861778869326, 4.08604340869709, 4.104074224479666, 6.623635631527402, 4.212334312815272, 6.604218419849647, 5.411640787047808, 10.332012644594585, 6.158799959614138, 5.866924150927732, 4.7366386292374285, 4.866165784844005, 9.082369774850132, 10.789233881886798, 5.2155998141259206, 5.358463392608293, 4.77252892346041, 5.968095858805026, 4.9604194249287845, 5.315718166382311, 6.399446970760239, 6.3399493470260255, 4.467784217754701, 7.6384278236408845, 5.683487820786342, 5.203377980158735, 7.6573070986175, 5.71603513309411, 4.7562436159455945, 6.276582965120444, 7.451709533397931, 10.034861389585203]
example_1_normal_result = Normal_Test(example_1)
example_2_normal_result = Normal_Test(example_2)
example_1_2_var_result = Levene_Test(example_1, example_2)

if example_1_normal_result and example_2_normal_result == True:
    if example_1_2_var_result == True:
        T_Studnet_test(example_1, example_2)
    else:
        Welch_Test(example_1, example_2)
else:
    Mann_Whitney_Test(example_1, example_2)
